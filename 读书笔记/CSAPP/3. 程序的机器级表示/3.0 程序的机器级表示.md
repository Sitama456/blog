## 程序的机器级表示
无论应用程序使用C语言，还是用C++或者Java语言写的，最终都要经过一系列的阶段生成机器代码。在本章中，将能够近距离地观察机器代码，以及人类可读的表示——汇编代码。

使用高级语言编程的时候，机器屏蔽2了程序的细节，即机器级的实现。与此相反，当使用汇编代码编程的时候，程序员必须指定程序来执行计算的低级指令。高级语言提供的抽象级别比较高，大多数时候，这种抽象级别上工作效率会更高，也更可靠。编译器提供的类型检查能帮助程序员发现许多程序错误，并能保证按照一致的方式来引用和处理数据。通常去情况下，使用现代的优化编译器产生的代码至少与一个熟练的汇编语言程序员手工编写的代码一样有效。最大的优点2是，用高级语言编写的程序可以在很多不同的机器上编译和执行，而汇编代码则是与机器本身密切相关的。

对于大多数程序员，并不一定要了解汇编语言。但是对于维护和开发操作系统内核的工程师而言，汇编语言是一项必不可少的技能。内核中有许多用到汇编语言编写的程序，比如加载内核的boot程序、加载内核的loader程序以及其他更注重效率的程序，都需要使用汇编语言编写。因此，这类程序员有必要掌握汇编语言的编写规则，能够阅读和理解以及编写汇编程序。

本章将基于x86-64，介绍x86-64的细节，从数据的表示和处理以及控制的实现开始。了解如何实现C语言中的控制结构，如`if` `while` `switch`语句。之后，会介绍过程(函数)的实现，包括程序如何维护一个运行栈来支持过程间数据和控制的传递，以及局部变量的存储。接着，会考虑在机器级如何实现向数字、结构和联合这样的数据结构。有了这些背景知识后，会进一步讨论内存访问越界的问题，以及系统容易遭受缓冲区溢出攻击的问题。

计算机工业已经完成从32位到64位机器的过渡。32位机器智能使用大概4GB的随机访问存储器。随着存储器加个急剧下降，人们对计算和需求和数据的大小持续增加，超越这个限制既经济上可行又有技术上的需要。当前的64位机器能够使用多大256TB的内存空间，而且很容易就能扩展至16EB。虽然很难想象一台机器需要这么大的内存，但是回想20实际70和80年代，当32位机器开始普及的时候，4GB内存看上去也是超级大的。